# Mini Analytics System. Infamous Game Analytics

## Описание проекта

Данный проект представляет собой **end-to-end систему сбора и анализа данных**, реализованную с использованием Docker, PostgreSQL, Redash и Jupyter Notebook.

В качестве предметной области выбрана **игровая аналитика** на примере игры *Infamous*.  
Система имитирует поток игровых событий главного героя **Cole MacGrath**, сохраняет их в базу данных и предоставляет инструменты для анализа и визуализации данных.

Проект демонстрирует полный цикл работы с данными:
- генерация событий
- хранение
- аналитика
- визуализация

---

## Архитектура системы

Архитектура проекта построена по принципу централизованного хранения данных.

Python-генератор автоматически создаёт поток игровых событий и записывает их напрямую в базу данных PostgreSQL. PostgreSQL выступает в роли центрального хранилища, обеспечивая надёжное сохранение и доступ к данным.

К базе данных подключаются два аналитических инструмента:
- **Redash**, используемый для построения SQL-запросов и интерактивных дашбордов;
- **Jupyter Notebook**, применяемый для исследовательского анализа данных и визуализации с использованием Python-библиотек.




### Компоненты системы

- **Generator** — Python-скрипт, автоматически генерирующий игровые события  
- **PostgreSQL** — хранение всех сгенерированных событий  
- **Redash** — SQL-аналитика и интерактивные дашборды  
- **Jupyter Notebook** — исследовательский анализ данных  
- **Docker Compose** — запуск всей системы  

---

## Предметная область - игровая статистика 

Генерируемые события:
- убийство врагов (`kill_enemy`)
- убийство мирных жителей (`kill_civilian`)
- моральный выбор (`moral_choice`)
- подзарядка энергии (`recharge`)
- завершение миссии (`mission_complete`)
- прокачка способности (`ability_upgrade`)

Каждое событие содержит **параметры**, влияющие на развитие персонажа (опыт, карма, ранг).

---

## Структура данных

Таблица `game_events` содержит следующие поля:

| Поле          | Описание |
|---------------|----------|
| `id`          | уникальный идентификатор |
| `ts`          | временная метка события |
| `player`      | имя игрока |
| `action`      | тип действия |
| `xp_delta`    | полученный опыт |
| `karma_delta` | изменение кармы |
| `karma_total` | суммарная карма |
| `rank`        | ранг персонажа |
| `energy_source` | источник энергии |

---

## Запуск проекта

### Требования
- Docker  
- Docker Compose
- Git

Для запуска проекта необходимо выполнить клонирование репозитория и создать файл .env на основе шаблона .env.example

### Запуск всей системы

```
docker-compose up
```
При необходимости пересборки образов используется команда
```
docker-compose up -d --build
```

## Запуск и работа системы

После запуска проекта автоматически поднимаются следующие сервисы:
- PostgreSQL
- генератор данных
- Redash
- Jupyter Notebook

---

## Генерация данных

Генератор:
- запускается автоматически при старте контейнеров
- создаёт игровые события с периодичностью 1 раз в секунду
- записывает данные напрямую в базу данных PostgreSQL

### Проверка работы генератора

```
docker-compose logs -f generator
```

### Проверка сохранения данных в базе
```
docker-compose exec postgres psql -U app -d analytics -c "SELECT COUNT(*) FROM game_events;"
```
Количество записей в таблице увеличивается со временем, что подтверждает корректную работу генератора и сохранение данных.

### Аналитика в Redash

Redash доступен по адресу:
```
http://localhost:5000
```
В проекте реализован дашборд Infamous Game Analytics, включающий следующие визуализации:
- XP per minute — динамика получаемого опыта
- Karma total over time — изменение кармы персонажа
- Actions count — распределение типов действий
- Rank  — распределение рангов персонажа

Пример дашборда в Redash
<img width="1660" height="958" alt="Redash Dashboard" src="https://github.com/user-attachments/assets/70c5b470-cb9d-40d5-846e-04e37e66be6c" />

### Анализ в Jupyter Notebook
Jupyter Notebook доступен по адресу:
```
http://localhost:8888
```
В Jupyter Notebook выполняется:
- загрузка данных из PostgreSQL
- статистический анализ данных
- построение аналитических графиков

Пример анализа в Jupyter Notebook
<img width="6594" height="964" alt="Jupyter" src="https://github.com/user-attachments/assets/8d850bba-c018-4471-8e5d-0617fca7075c" />



